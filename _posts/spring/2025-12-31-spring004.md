---
layout: single
title:  "내가 헷갈려서 작성하는 의존 관련 포스트"
folder: "spring"
categories:
  - spring
permalink: categories/spring/4
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 의존, 의존성, DIP, DI… 이름은 비슷한데 왜 이렇게 헷갈릴까
스프링으로 프로젝트를 하다 보면 \'의존\', \'의존성\', \'의존 역전\', \'의존성 역전 원칙(DIP)\', \'의존성 주입(DI)\' 같은 단어가 연달아 튀어나온다. 다들 비슷하게 들리고, 어떤 건 원칙이고 어떤 건 구현 방식이고, 어떤 건 그냥 관계를 말하는데도 섞어서 쓰는 경우가 많다. 해당 블로그 포스트의 목표는 단순하다. 각 용어가 무엇을 가리키는지, 그리고 서로 어디가 겹치고 어디서 갈라지는지를 한 번에 정리하는 것이다.

## 의존과 의존성
가장 먼저 \'의존\'과 \'의존성\'은 사실상 같은 뿌리다. \'A가 B에 의존한다\'는 말은 A가 B 없이는 제대로 동작하기 어렵다는 관계를 뜻한다. 예를 들어 서비스가 레포지토리를 호출한다면 서비스는 레포지토리에 의존한다라고 말할 수 있다.

이 관계를 명사로 부르면 \'의존성\'이 된다. 다만 실무에서는 의존성이 코드 레벨 관계뿐 아니라, Gradle/Maven의 외부 라이브러리도 가리키는 경우가 많다. 그래서 \'스프링 의존성을 추가했다\'는 말은 보통 spring-boot-starter-web 같은 빌드 의존성을 뜻하고, \'서비스가 레포지토리에 의존한다\'는 말은 코드 의존성을 뜻한다. 이처럼 의존성은 같은 단어지만 가리키는 레이어가 다를 수 있다.

## 의존 역전(Dependency Inversion)
다음으로 \'의존 역전(Dependency Inversion)\'은 말 그대로 의존 방향을 뒤집는 설계 아이디어를 말한다. 전통적인 구조에서는 비즈니스 코드(상위)가 DB나 프레임워크(하위)에 직접 매달리기 쉽다. 예를 들어 서비스가 JPA 구현체나 JDBC 구현체를 직접 알고 호출하면, 저장 방식이 바뀌는 순간 비즈니스 코드가 흔들린다.

의존 역전은 이 관계를 바꾼다. 서비스가 직접 구현체를 붙잡는 대신, \'저장/조회가 필요하다\'는 요구를 인터페이스(추상)로 표현하고 서비스는 그 추상에만 의존한다. 그리고 실제 JPA 구현체 같은 저수준 코드는 그 인터페이스를 구현한다. 결과적으로 정책(고수준)이 세부사항(저수준)에 끌려가는 구조가 아니라 세부사항이 정책을 만족시키는 구조가 된다. 이 상태 자체를 가리켜 \'의존이 역전됐다\'고 말한다.

## 의존 역전 원칙
여기서 \'의존 역전 원칙(DIP: Dependency Inversion Principle)\'이 등장한다. 많은 사람이 의존 역전과 DIP를 같은 말처럼 쓰는데, 엄밀히는 뉘앙스가 다르다. 의존 역전은 \'의존이 뒤집힌 상태/방향\'을 설명하는 말로 쓰이고, DIP는 그 방향을 \'좋은 설계 원칙\'으로 정리한 규범이다. \'의존 역전\'이 설계의 결과를 묘사하는 말이라면, \'DIP\'는 그 결과를 생성하기 위한 설계 규칙이라고 보면 좋다.

## 의존성 주입(Dependency Injection)
의존성 주입(DI: Dependency Injection)은 아예 결이 다르다. DI는 앞서 좋은 설계 원칙으로 설명했던 DIP랑은 관계없이 객체를 어떻게 전달하느냐에 대한 구현 기법을 말한다. 가령 어떤 클래스가 레포지토리가 필요하다고 하자. 그 레포지토리를 클래스 내부에서 new로 직접 만들어버리면 결합도가 높아지고 테스트도 어려워진다. 대신 필요한 것을 생성자나 setter로 밖에서 넣어주는 방식이 DI다. 스프링에서 생성자 주입(@Autowired 혹은 생성자 1개면 생략) 같은 것이 바로 DI의 대표 사례다. 추가로 \'의존성 주입 패턴\'이라는 표현은 사실상 DI를 패턴으로 부르는 말이라, 둘은 거의 동의어로 봐도 무방하다.

실무/문서/책 기준으로 **DIP는 의존 역전 원칙을, DI는 의존성 주입을 의미하는 약어로 쓰인다.** 의존 역전을 DI로, 의존성 주입 패턴을 DIP로 부르지 않으므로 사용 시 반드시 주의가 필요하다.

## DI와 DIP 사이의 관계
알아두어야 할 점은 이름이 비슷한 DIP와 DI는 다른 층위의 개념이라는 점이다. DIP는 \'어떤 방향으로 의존성을 설계해야 하는가\'라는 철학(원칙)이고, DI는 \'그 의존 객체를 어떻게 전달할 것인가\'라는 구현(기법)이다. DIP를 잘 지키기 위해 DI(스프링에서의 생성자 기반 주입)가 자주 사용되는 것은 사실이지만, DI를 쓴다고 해서 자동으로 DIP를 지키는 것은 아니다.

예를 들어 생성자 주입을 하더라도 주입받는 타입이 JpaOrderRepository처럼 구체적인 구현체라면, 정책 코드가 여전히 세부사항에 묶일 수 있다. 반대로 인터페이스에 의존하도록 설계했다면(DIP), 스프링 없이도 팩토리나 수동 조립으로 주입할 수 있다(DI 프레임워크가 없어도 DIP는 가능). 즉 DIP는 \'무엇에 의존할지\'를 정하는 규칙이고, DI는 \'설정된 의존에 맞게 어떻게 연결할지\'에 대한 도구다.

## 최종 정리
\'의존/의존성\'은 단순히 계층 사이의 의존 관계 자체를 말하고, \'의존 역전\'은 그 관계가 뒤집힌 방향 또는 결과를 말하며, \'의존성 역전 원칙(DIP)\'은 그 방향을 권장하는 설계 원칙이다. \'의존성 주입(DI)\'은 그 의존 관계를 실체화하는 전달 방식이고, \'의존성 주입 패턴\'은 DI를 패턴이라고 부르는 말에 불과하다.