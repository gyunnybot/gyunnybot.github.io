---
layout: single
title:  "혼동되는 HTTP 상태 코드 정리"
folder: "network"
categories:
  - network
permalink: categories/network/network002
tags: NETWORK
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 리다이렉션
요청한 리소스의 URI가 다른 곳으로 이동했을 때 300번대 리다이렉션(Redirection) 응답이 돌아온다. 리다이렉션은 크게 영구적, 일시적 리다이렉션으로 나뉜다. 영구적 리다이렉션의 경우 홈페이지 이전과 같이 특정 URI가 완전히 달라질 때 사용되며, 상품 주문 완료 후 주문 내역 페이지로 이동하는 등 임의의 행동에 대해 잠시 특정 페이지로 이동해야 하는 상황에서는 일시적 리다이렉션이 사용된다.

영구적 리다이렉션은 다시 301(Moved Permanently), 308(Permanent Redirect)로 나뉜다. 301의 경우 POST 등의 메서드로 요청 메시지를 보내 리다이렉션을 받으면 메서드가 GET으로 변할 수(MAY) 있으며, 메시지 바디가 사라질 가능성(MAY)이 있다. 반면, 308은 기존 요청 메시지의 메서드와 바디의 내용이 변경되지 않는다(MUST NOT).

로그인 정보를 요청 메시지 바디에 담아 POST를 요청했는데, 새로운 로그인 URI로 영구 변경되었다고 가정해 보자. 301을 응답받았다면 새 로그인 페이지에서 로그인 정보를 다시 폼에 입력해야 할 가능성이 있는 셈이다(사실상 다시 입력해야 한다). 반면 308은 Location 헤더에 기록된 새로운 페이지로 접속 후 자동으로 로그인한다.

한편, 일시적 리다이렉션에는 302(Found), 307(Temporary Redirect)이 있다. 302는 301, 307은 308과 유사한 조건과 응답 결과를 가져오지만, 성격이 일시적이냐 영구적이냐에 따라 구분되는 상태 코드이다.

앞서 언급했던 상품 주문 예시와 같은 상황에서는 일시적 리다이렉션 응답을 사용하게 되는데, 전통적으로는 302(Found)가 사용된다. 그러나 302는 구현체에 따라 요청 메서드가 GET으로 바뀔 수도 있는 모호함이 있어, 항상 동일한 동작을 보장하지 않는다.

이를 해결하기 위해 정의된 303(See Other)는 리다이렉션 시 요청 메서드를 반드시 GET으로 변경하도록 명시하고 있다. 실제로 많은 라이브러리와 프레임워크가 302를 기본값으로 사용하지만, 리다이렉션 후 반드시 GET 요청이 이루어져야 하는 상황이라면 303을 사용하는 것이 더 안전하고 권장된다.

## 401
클라이언트가 해당 리소스에 대한 인증(Authentication)이 필요할 때 401(Unauthorized)을 반환한다. 인증이란, 본인이 누구인지 확인이 완료된 것을 말한다. 반면, 인가(Authorization)는 인증을 넘어 특정 리소스에 접근할 수 있는 권한을 말한다.

사전적인 정의에 따르면 401 Unauthentication이 맞는 이름이지만 HTTP 표준 설계 과정에서 Unauthorized로 정의되었다. 따라서 401 상태 코드는 영어가 아닌 한글로 \'401 인증되지 않음\'이라고 기억하는 편이 좋다.