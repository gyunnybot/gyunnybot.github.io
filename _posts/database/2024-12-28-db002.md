---
layout: single
title:  "이상현상과 정규화"
folder: "database"
categories:
  - database
permalink: categories/database/2
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 이상현상과 정규화
이상현상이란 테이블 내 투플 데이터를 삽입, 삭제, 수정 시 데이터베이스의 일관성을 손상시켜 데이터 무결성 규칙이 깨지는 현상을 의미한다.

정규화는 테이블 내 속성들의 함수 종속성을 파악해 모든 결정자가 기본 키가 될 때까지 테이블을 분해하여 이상현상을 없애는 과정이다.

정규화는 표준화된 정규화 과정을 거친다. 상위 정규형은 하위 정규형의 조건을 만족하며, 정규형이 높을수록(숫자가 높을수록 상위) 이상현상은 줄어든다.

제1 정규형은 \'테이블 내 필드 값이 원자값이어야 한다\'는 조건에 맞게 수정된 테이블이다.

제2 정규형은 테이블의 기본 키가 복합 키로 구성되었다면 복합 키의 일부만으로도 다른 속성에 대한 결정자가 될 수 있는지 확인 후, 해당 관계에 따라 분해된 테이블을 말한다.

어떤 속성이 기본 키뿐만 아니라 다른 속성에도 종속(결정)된다면 해당 속성은 \'이행적으로 종속되었다\'라고 한다. 제3 정규형을 만족하는 테이블은 기본 키가 아닌 나머지 속성들이 오직 기본 키에만 종속된 상태의 테이블을 뜻한다. 이를 \'기본 키에 비이행적으로 종속되었다\'라고 말한다.

제3 정규형의 조건을 만족하면서 모든 결정자가 기본 키인 경우, 그 테이블은 BCNF(Boyce-Codd Normal Form)에 해당한다.

## 역정규화
일반적으로 BCNF까지 정규화 과정을 거치게 되면 대부분의 이상현상이 사라진다. 그러나 필요 이상의 정규화는 생성되는 인덱스와 테이블의 양이 많아져 오히려 쓰기 작업의 성능을 저하시키는 원인이 될 수 있다.

역정규화는 데이터의 중복을 일부 허용하면서 정규화된 데이터를 합쳐 재구성해 읽기 성능을 향상시키는 방법이다. 역정규화는 비정규화와는 엄연히 다른 개념으로, 역정규화는 정규화가 진행된 테이블을 기반으로만 진행하는 것이 원칙이다.

## 무손실 분해
JOIN 연산을 통해 공통 속성으로 묶어 다시 합성된 테이블이 분해 이전의 테이블과 완벽하게 같을 때 \'무손실 분해를 만족한다\'라고 한다. 정규화를 통해 분해된 테이블을 손실 없이 다시 합치려면 분해된 테이블 사이에 공통된 키(Key) 속성이 하나 이상 존재해야 한다.

다시 말해 분해된 두 개의 테이블 사이의 공통된 속성이 둘 중 어느 하나의 기본 키(PK)라면(나머지 하나의 테이블 입장에서는 외래 키(FK)) 무손실 분해 조건을 만족하게 된다.