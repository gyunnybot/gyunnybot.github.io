---
layout: single
title:  "싱글톤 패턴"
folder: "oop"
categories:
  - oop
permalink: categories/oop/3
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 싱글톤 패턴
싱글톤 패턴은 애플리케이션 내 인스턴스가 하나만 생성되어도 문제가 없을 때 성능상의 이점을 활용하기 위한 패턴이다.

인스턴스가 오직 하나만 생성되어야 한다는 원칙이 있지만, 멀티스레드 환경에서 가장 기본적이고 흔한 구현 방식(Lazy Initialization)을 사용하면 인스턴스가 두 개 이상 생성되는 레이스 컨디션이 발생할 수 있다.

```java
public class Singleton {
    private static Singleton instance;

    public static Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }

        return instance;
    }
}
```

<br>
조건문을 통과하여 new를 활용해 인스턴스를 생성하기 전에 다른 스레드가 조건문을 통과한다면 두 개의 인스턴스가 생성될 가능성이 있다.

Bill Pugh Solution(Holder 방식)을 활용해 보완할 수 있다. JVM이 클래스를 로딩할 때 스레드 안전을 보장해주므로 별도의 동기화 코드가 필요없게 된다.

```java
public class Singleton {
    private Singleton() {}

    private static class SingletonHolder {
        private static final Singleton INSTANCE = new Singleton();
    }

    public static Singleton getInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```