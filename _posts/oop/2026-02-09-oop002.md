---
layout: single
title:  "의존 역전"
folder: "oop"
categories:
  - oop
permalink: categories/oop/2
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 의존 역전
고수준 컴포넌트가 저수준 컴포넌트에 의존하지 않도록 의존 관계를 역전시키는 것을 의존 역전이라 한다.

컴포넌트란, 넓은 의미에서는 레이어드 아키텍처에서 구분되는 하나의 층(layer)를 말하지만, 하나의 클래스라 봐도 무방하다.

고수준/저수준을 가르는 기준은 어떤 컴포넌트가 특정 기술에 종속되는지 여부이다.

데이터를 외부에서 주고받는 컨트롤러의 경우 HTTP가 대표적이지만, FTP와 같은 프로토콜에 의해서도 설계될 수 있다. 따라서 컨트롤러는 저수준 컴포넌트인 셈이다.

레포지토리도 마찬가지이다. 파일에 정보를 저장할지, 데이터베이스를 사용할지에 따라 사용되는 컴포넌트가 달라질 수 있다. 역시 저수준 컴포넌트이다.

반면, 서비스 계층은 실제 비즈니스 로직을 수행하며, 외부 기술에 종속되지 않고 행동 자체를 정의한다. 따라서 고수준 컴포넌트이다.

고수준 컴포넌트가 저수준 컴포넌트에 의존하지 않도록 하는 것이 의존 역전이라고 했는데, 서비스 계층은 \'저장한다\'라는 행동을 실행함과 동시에 의존 역전까지 지켜야 한다.

이를 위해서 레포지토리 인터페이스를 생성해 서비스가 의존하게 만든다.

<div style="text-align: center;">
  <img src="{{ site.baseurl }}/assets/posts/oop/1.png" alt="이미지 설명">
</div>