---
layout: single
title:  "멀티스레드 모델"
folder: "os"
categories:
  - operatingsystem
permalink: categories/operatingsystem/os005
tags: OS
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 멀티스레드 모델
프로세스는 커널 프로세스와 사용자 프로세스로 나뉘며 스레드에도 커널 스레드와 사용자 스레드로 나뉩니다. 사용자 스레드가 커널 스레드의 기능을 사용하려면 시스템 호출을 사용해야 합니다. 이때 커널 스레드와 사용자 스레드의 대응 방식에 따라 3가지 모델로 분류할 수 있습니다.

<span style="color: rgb(3, 150, 150); font-weight: bold;">`사용자 스레드 모델(1 to N 모델)`</span>은 하나의 프로세스를 이루는 여러 사용자 스레드가 커널 스레드 하나와 연결된 형태입니다. "CPU의 작업 단위는 스레드"라는 문장에서의 스레드는 컴퓨터 사양을 따질 때 적용되는 하드웨어 스레드가 아닌, 운영체제에서 통용되는 소프트웨어 스레드를 말합니다. 그런데 CPU가 직접 실행하는 스레드는 결국 커널 스레드입니다. 사용자 스레드가 자원 활용이나 입출력 같은 커널의 기능을 사용하려면 시스템 호출을 통해 커널 모드로 전환해야 하며, 이 과정에서 커널 스레드가 실행되기 때문입니다.

사용자 스레드 모델은 사용자 영역에서 스레드를 구현하며, 관련 라이브러리를 통해 스케줄링, 동기화 같은 기능을 자체적으로 제공받습니다. 따라서 커널 스레드 기반의 문맥 교환이 필요하지 않아 작업 속도가 빠릅니다.

그러나, 사용자 스레드는 커널이 직접 관리하지 않으므로 멀티스레드 방식의 사용자 프로세스라도 커널 입장에서 보이는 것은 단일 커널 스레드입니다. 따라서, 물리적인 멀티코어 환경이 마련되어도 여러 CPU 코어를 활용하지 못한다는 단점이 있습니다.

<span style="color: rgb(3, 150, 150); font-weight: bold;">`커널 스레드 모델(1 to 1 모델)`</span>은 커널이 멀티스레드를 지원하는 방식이며 사용자 스레드와 커널 스레드가 1 대 1로 연결되어 작업이 수행됩니다. 사실 상 각각의 사용자 스레드가 커널 스레드에게 작업을 위임하는 방식이라고 할 수 있습니다. 멀티코어 환경에서 멀티프로세싱 방식으로 작업을 수행할 수 있지만, 하드웨어 스레드가 커널 스레드보다 적다면 문맥교환 시 많은 오버헤드가 발생해 느리게 작동합니다.