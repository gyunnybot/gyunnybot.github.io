---
layout: single
title:  "스레싱과 프레임 할당"
folder: "os"
categories:
  - operatingsystem
permalink: categories/operatingsystem/os006
tags: OS
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 스레싱
컴퓨터에서 프로그램을 실행하려면 <span style="color: rgb(3, 150, 150); font-weight: bold;">`폰 노이만 구조`</span>에 의해 프로세스가 메모리에 올라와야 합니다. 하지만 메모리에 여유가 없을 때에는 기존에 실행되고 있는 프로세스 프레임 중 일부를 스왑 영역으로 옮겨야 하는데, 잦은 페이지 부재로 인한 하드디스크 입출력이 많아져 CPU의 작업이 멈춘 것 같은 상태를 <span style="color: rgb(3, 150, 150); font-weight: bold;">`스레싱(Threshing)`</span>이라고 합니다.

프로그램의 수가 적을 때는 CPU 사용률이 계속 증가하다가 메모리가 꽉 차면 CPU가 작업하는 시간보다 기존의 페이지를 스왑 영역으로 보내고 새로운 페이지를 메모리에 가져오는 작업이 더 많아져 CPU가 작업할 수 없는 상태에 이르게 되는데, 이 시점을 <span style="color: rgb(3, 150, 150); font-weight: bold;">`스레싱 발생 지점`</span>이라고 부릅니다.

## 스레싱과 프레임 할당
스레싱을 예방하기 위한 프레임 할당 방식은 크게 <span style="color: rgb(3, 150, 150); font-weight: bold;">`정적 할당`</span>과 <span style="color: rgb(3, 150, 150); font-weight: bold;">`동적 할당`</span>으로 나뉩니다.

정적 할당은 프로세스마다 프레임의 크기를 고정하여 프로세스 실행 초기에 프레임을 배분해주는 방식으로, <span style="color: rgb(3, 150, 150); font-weight: bold;">`균등 할당`</span>과 <span style="color: rgb(3, 150, 150); font-weight: bold;">`비례 할당`</span>이 있습니다.

균등 할당은 총 프레임을 프로세스의 수로 나누는 단순한 방식이며, 비례 할당은 프로세스의 상대적인 크기에 비례해 프레임을 할당하는 방식입니다.

동적 할당은 정적 할당에 비해 유연한 할당 방식으로 <span style="color: rgb(3, 150, 150); font-weight: bold;">`작업집합 모델`</span> 방식과 <span style="color: rgb(3, 150, 150); font-weight: bold;">`페이지 부재 빈도`</span>를 확인하는 방식이 있습니다.

작업집합 모델은 지역성 이론을 바탕으로 최근 일정 시간 동안 참조된 페이지들을 집합으로 묶어 물리 메모리에 유지하는 방법입니다.

작업 집합에 포함되는 페이지의 범위를 <span style="color: rgb(3, 150, 150); font-weight: bold;">`작업집합 윈도우`</span>라고 하며 윈도우 크기에 따라 프로세스의 실행 성능이 달라집니다. 윈도우 크기를 너무 크게 잡으면 현재 실행되지 않는 페이지까지 메모리에 남아 다른 프로세스에 영향을 미치게 되고, 너무 작게 잡으면 스레싱이 발생합니다.

페이지 부재 빈도를 확인하는 방식은 말 그대로 프로세스마다 페이지 부재 횟수를 계산하여 사용자가 미리 설정한 상한선에 도달했을 때에는 해당 프로세스에 프레임을 추가로 할당하고, 하한선일 때에는 할당된 프레임을 회수하는 방식입니다.