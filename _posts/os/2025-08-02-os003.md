---
layout: single
title:  "스레드와 병렬 처리"
folder: "os"
categories:
  - operatingsystem
permalink: categories/operatingsystem/os003
tags: OS
toc: true
toc_sticky: true
sidebar_main: true
published: true
---

## 스레드란?
CPU는 메인보드에 탑재된 크리스털 오실레이터(Crystal Oscillator)의 주기적인 진동 신호를 기반으로 클록을 생성하여 작동한다. 이때 덧셈 연산, 메모리 로드와 같이 CPU가 한 클록(Clock) 주기마다 수행할 수 있는 최소 실행 단위를 명령어(Instruction)라고 한다.

스레드(Thread)는 이러한 명령어들의 논리적인 실행 흐름을 나타내는 최소 단위로 정의된다. 분명 CPU는 한 번에 하나의 명령어만 실행할 수 있지만, 결국 특정 스레드에 소속된 명령어다. 즉, CPU는 항상 어떤 \'스레드\'에 속한 명령어 흐름을 따라가며 실행하기 때문에 실행 \'흐름\'의 최소 단위는 명령어가 아니라 스레드라고 보는 것이 타당하다. 실제 프로그램은 대부분 여러 개의 명령어로 구성되며, 단일 명령어로 구성된 프로그램은 거의 존재하지 않는다.

## 병렬 처리
CPU의 성능을 향상시키는 방법 중 하나는 CPU의 핵심 기능을 가진 코어(Core)를 여러 개 만들거나, 동시에 실행 가능한 명령의 개수를 늘리는 방법 등이 있다.

코어는 논리 프로세서(Logical Processor)라고도 불리며, 일반적으로 하나의 코어는 동시에 하나의 스레드를 실행할 수 있다. 여러 개의 코어를 사용하면 작업의 병렬 처리가 가능해지는데, 이를 병렬 처리 기법 중 슈퍼스칼라(Super Scalar) 기법이라 한다. 슈퍼스칼라 기법은 동시성의 성질을 가지며, 오늘날의 컴퓨터는 대부분 슈퍼스칼라 기법을 사용하고 있다.

반면 단일 CPU(또는 코어)에서도 병렬 처리 기법을 적용할 수 있는데 CPU 멀티스레딩(CPU Multi threading)이 그 예시다. 앞서 스레드는 명령어들의 논리적인 실행 흐름에 따라 구성된 집합이라고 했다. 다시 말해 스레드는 여러 명령어 단계로 나뉘는데, 이때 단계가 겹치지 않는다면 다른 스레드 내 명령어와 동시에 실행할 수 있다. 스레드를 구성하는 명령어들이 CPU 내부에서 서로 교차 배치되어 처리될 수 있다는 것이다.

쉽게 말해 CPU 멀티스레딩은 스레드를 하나씩 일괄적으로 처리하는 것이 아니라, 단계별로 명령어를 나누고 한 단계씩 밀어서 동시에 실행하는 방법이다. 이를 파이프라이닝(Pipelining) 병렬 처리 기법이라 한다. 파이프라이닝 기법은 병렬성의 성질을 갖는다.